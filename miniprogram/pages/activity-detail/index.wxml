<!--pages/activity-detail/index.wxml-->
<view class="container">
  <!-- åŠ è½½ä¸­ -->
  <view class="loading-wrap" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ´»åŠ¨è¯¦æƒ… -->
  <block wx:elif="{{activity}}">
    <!-- æ´»åŠ¨å¤´éƒ¨ -->
    <view class="activity-header">
      <view class="status-tag {{activity.status === 'open' ? 'tag-open' : 'tag-closed'}}">
        {{activity.status === 'open' ? 'æŠ¥åä¸­' : 'å·²æˆªæ­¢'}}
      </view>
      <view class="activity-title">{{activity.title}}</view>
    </view>

    <!-- æ´»åŠ¨ä¿¡æ¯å¡ç‰‡ -->
    <view class="info-card">
      <view class="info-item">
        <view class="info-icon">ğŸ“…</view>
        <view class="info-content">
          <view class="info-label">æ´»åŠ¨æ—¶é—´</view>
          <view class="info-value">{{activity.date}} {{activity.time}}</view>
        </view>
      </view>

      <view class="info-item">
        <view class="info-icon">ğŸ“</view>
        <view class="info-content">
          <view class="info-label">æ´»åŠ¨åœ°ç‚¹</view>
          <view class="info-value">{{activity.location}}</view>
        </view>
      </view>

      <view class="info-item">
        <view class="info-icon">ğŸ‘¥</view>
        <view class="info-content">
          <view class="info-label">å‚ä¸äººæ•°</view>
          <view class="info-value">
            <text class="people-current">{{activity.currentPeople || 0}}</text>
            <text class="people-divider">/</text>
            <text class="people-max">{{activity.maxPeople}}äºº</text>
          </view>
        </view>
      </view>

      <view class="info-item">
        <view class="info-icon">ğŸ’°</view>
        <view class="info-content">
          <view class="info-label">æ´»åŠ¨è´¹ç”¨</view>
          <view class="info-value price">Â¥{{activity.price}}/äºº</view>
        </view>
      </view>
    </view>

    <!-- æ´»åŠ¨æè¿° -->
    <view class="desc-card" wx:if="{{activity.description}}">
      <view class="card-title">æ´»åŠ¨è¯¦æƒ…</view>
      <view class="desc-content">{{activity.description}}</view>
    </view>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <view class="notice-card">
      <view class="card-title">æ³¨æ„äº‹é¡¹</view>
      <view class="notice-list">
        <view class="notice-item">1. è¯·æå‰10åˆ†é’Ÿåˆ°è¾¾åœºåœ°ç­¾åˆ°</view>
        <view class="notice-item">2. è¯·è‡ªå¤‡çƒæ‹ï¼Œç°åœºæä¾›ç½‘çƒ</view>
        <view class="notice-item">3. æ´»åŠ¨å¼€å§‹å‰24å°æ—¶å¯ç”³è¯·é€€æ¬¾</view>
        <view class="notice-item">4. é›¨å¤©æ´»åŠ¨å°†å¦è¡Œé€šçŸ¥</view>
      </view>
    </view>
  </block>
</view>

<!-- åº•éƒ¨æŒ‰é’® -->
<view class="bottom-bar" wx:if="{{activity}}">
  <view class="price-info">
    <text class="price-label">è´¹ç”¨</text>
    <text class="price-amount">Â¥{{activity.price}}</text>
  </view>
  
  <view 
    class="btn-register {{isRegistered ? 'btn-disabled' : (canRegister ? '' : 'btn-disabled')}}"
    bindtap="goToBooking"
  >
    {{isRegistered ? 'å·²æŠ¥å' : (canRegister ? 'ç«‹å³æŠ¥å' : 'æŠ¥åå·²æˆªæ­¢')}}
  </view>
</view>

