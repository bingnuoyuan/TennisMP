<!--pages/activity-detail/index.wxml-->
<view class="container">
  <!-- Loading -->
  <view class="loading-wrap" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">Loading...</text>
  </view>

  <!-- Event Details -->
  <block wx:elif="{{activity}}">
    <!-- Event Header -->
    <view class="activity-header">
      <view class="status-tag {{activity.status === 'open' ? 'tag-open' : 'tag-closed'}}">
        {{activity.status === 'open' ? 'Open' : 'Closed'}}
      </view>
      <view class="activity-title">{{activity.title}}</view>
    </view>

    <!-- Event Info Card -->
    <view class="info-card">
      <view class="info-item">
        <view class="info-icon">ğŸ“…</view>
        <view class="info-content">
          <view class="info-label">Date & Time</view>
          <view class="info-value">{{activity.date}} {{activity.time}}</view>
        </view>
      </view>

      <view class="info-item">
        <view class="info-icon">ğŸ“</view>
        <view class="info-content">
          <view class="info-label">Location</view>
          <view class="info-value">{{activity.location}}</view>
        </view>
      </view>

      <view class="info-item">
        <view class="info-icon">ğŸ‘¥</view>
        <view class="info-content">
          <view class="info-label">Participants</view>
          <view class="info-value">
            <text class="people-current">{{activity.currentPeople || 0}}</text>
            <text class="people-divider">/</text>
            <text class="people-max">{{activity.maxPeople}}</text>
          </view>
        </view>
      </view>

      <view class="info-item">
        <view class="info-icon">ğŸ’°</view>
        <view class="info-content">
          <view class="info-label">Fee</view>
          <view class="info-value price">Â¥{{activity.price}}/person</view>
        </view>
      </view>
    </view>

    <!-- Event Description -->
    <view class="desc-card" wx:if="{{activity.description}}">
      <view class="card-title">Description</view>
      <view class="desc-content">{{activity.description}}</view>
    </view>

    <!-- Notice -->
    <view class="notice-card">
      <view class="card-title">Notice</view>
      <view class="notice-list">
        <view class="notice-item">1. Please arrive 10 minutes early for check-in</view>
        <view class="notice-item">2. Bring your own racket, balls provided</view>
        <view class="notice-item">3. Refund available 24 hours before event</view>
        <view class="notice-item">4. Rain policy: will notify if rescheduled</view>
      </view>
    </view>
  </block>
</view>

<!-- Bottom Bar -->
<view class="bottom-bar" wx:if="{{activity}}">
  <view class="price-info">
    <text class="price-label">Fee</text>
    <text class="price-amount">Â¥{{activity.price}}</text>
  </view>
  
  <view 
    class="btn-register {{isRegistered ? 'btn-disabled' : (canRegister ? '' : 'btn-disabled')}}"
    bindtap="goToBooking"
  >
    {{isRegistered ? 'Registered' : (canRegister ? 'Register Now' : 'Registration Closed')}}
  </view>
</view>
