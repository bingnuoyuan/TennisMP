<!--pages/index/index.wxml-->
<wxs module="dateUtil">
  module.exports.getDay = function(dateStr) {
    if (!dateStr) return '';
    var parts = dateStr.split('-');
    return parts.length === 3 ? parseInt(parts[2]) : '';
  }
</wxs>

<view class="container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="logo">
      <text class="logo-text">ğŸ¾ Just Do Tennis</text>
    </view>
  </view>

  <!-- Loading -->
  <view class="loading-wrap" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">Loading...</text>
  </view>

  <!-- Empty State -->
  <view class="empty-wrap" wx:elif="{{isEmpty}}">
    <text class="empty-icon">ğŸ¾</text>
    <text class="empty-text">No Events</text>
    <text class="empty-desc">Stay tuned for more events</text>
  </view>

  <!-- Activity List -->
  <view class="activity-list" wx:else>
    <view class="section-title">Upcoming Events</view>
    
    <view 
      class="activity-card" 
      wx:for="{{activities}}" 
      wx:key="_id"
      bindtap="goToDetail"
      data-id="{{item._id}}"
    >
      <!-- Status Tag -->
      <view class="status-tag {{item.status === 'open' ? 'tag-open' : 'tag-closed'}}">
        {{item.status === 'open' ? 'Open' : 'Closed'}}
      </view>
      
      <!-- Activity Info -->
      <view class="activity-info">
        <view class="activity-title">{{item.title}}</view>
        
        <view class="activity-meta">
          <view class="meta-item">
            <view class="calendar-icon">
              <view class="calendar-header"></view>
              <view class="calendar-day">{{dateUtil.getDay(item.date)}}</view>
            </view>
            <text class="meta-text">{{item.date}} {{item.time}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ“</text>
            <text class="meta-text">{{item.location}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ‘¥</text>
            <text class="meta-text">{{item.currentPeople || 0}}/{{item.maxPeople}}</text>
          </view>
        </view>
      </view>

      <!-- Price -->
      <view class="activity-price">
        <text class="price-label">Fee</text>
        <text class="price-value">Â¥{{item.price}}</text>
      </view>
    </view>
  </view>
</view>




